<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Mermaid Example</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/mermaid/10.9.0/mermaid.min.css">
  <link rel="stylesheet" href="./css/solution.css">
</head>
<body>
  <div>
    <h1>Smart Responses</h1>
    <div class="mermaid" id="mermaidHolder"></div>
  </div>
  <div id="content">
    <h1>Smart Responses Workflow</h1>
    <table>
      <tr>
        
        <th>Steps</th>
        <th>Action</th>
        <th>Source_Actors</th>
        <th>Target_Actor</th>
        <th>Action_Details</th>
        <th>Input</th>
        <th>Output</th>
       
      </tr>
      <tr>
       
        <td>01</td>
        <td>Initiates</td>
        <td>Client (Initiator)</td>
        <td>Bank's online banking portal or mobile app</td>
        <td>Initiates a payment through the originating bank's online banking portal or mobile app.</td>
        <td>Client initiates the payment transaction </td>
        <td>Transaction request is submitted to the bank's system.</td>
      
      </tr>
      <tr>
        
        <td>02</td>
        <td>Flags</td>
        <td>Bank's transaction monitoring system</td>
        <td>Transaction record</td>
        <td>The transaction is flagged after further review of predefined criteria.</td>
        <td>Transaction details are analyzed against predefined criteria.</td>
        <td>Transaction is flagged as suspicious or requiring further review.</td>
       
      </tr>
      <tr>
       
        <td>03</td>
        <td>Notices</td>
        <td>Bank's notification system</td>
        <td>Client (Initiator)</td>
        <td>Initiator Notices the transaction is flagged</td>
        <td>Notification or alert generated by the bank's system.</td>
        <td>Initiator becomes aware that the transaction has been flagged.</td>
      
      </tr>
      <tr>
       
        <td>04</td>
        <td>Submits</td>
        <td>Client (Initiator)</td>
        <td>Bank's support portal</td>
        <td>Initiator submits a query through the bank's support portal for clarification or resolution.</td>
        <td>Query submitted through the support portal'</td>
        <td>Query is received and logged by the bank's support system.</td>
      
      </tr>
      <tr>
      
        <td>05</td>
        <td>Generates</td>
        <td>Bank's support system</td>
        <td>Case worker</td>
        <td>Automatically generates a ticket for the submitted query and assigns it to an available case worker.</td>
        <td>Details from the submitted quer'</td>
        <td>Support ticket is generated and assigned to a case worker for resolution.</td>
       
      </tr>
      <tr>
        
        <td>06</td>
        <td>Drafts</td>
        <td>AI Engine</td>
        <td>Support ticket</td>
        <td>The AI Engine, upon ticket generation, creates a smart response draft tailored to the specific issue. This includes acknowledgment, explanation, next steps, assurance, and contact information.</td>
        <td>Ticket details and flagged transaction information.</td>
        <td>AI-generated draft response is created</td>
        
      </tr>
      <tr>
      
        <td>07</td>
        <td>Reviews</td>
        <td>Case worker</td>
        <td>AI-generated draft response</td>
        <td>Reviews the AI-generated draft, adjusting the content to ensure it is personalized and accurately addresses the client's specific situation and concerns.</td>
        <td>AI-generated draft response.</td>
        <td>Finalized response is personalized and tailored to the client's situation</td>
        
      </tr>
      <tr>
      
        <td>08</td>
        <td>Sends</td>
        <td>Case worker</td>
        <td>Client (Initiator)</td>
        <td>Sends the finalized response to the client via the bank's support portal, email, or preferred communication channel</td>
        <td>Finalized response from the case worker.</td>
        <td>Response is sent</td>
        
      </tr>
    </table>
    
  </div>

  <script>
    // Helper function to load scripts dynamically
    function loadScript(src) {
      return new Promise((resolve, reject) => {
        const script = document.createElement('script');
        script.src = src;
        script.addEventListener('load', () => resolve());
        script.addEventListener('error', (e) => reject(e));
        document.body.appendChild(script);
      });
    }

    function initializeMermaid(markup) {
      if (!window.mermaid) {
        const mermaidScript = loadScript(
          'https://cdnjs.cloudflare.com/ajax/libs/mermaid/10.9.0/mermaid.min.js'
        );
        mermaidScript.then(() => {
          window.mermaid.mermaidAPI.initialize({ securityLevel: 'loose' });
          renderMermaid(markup);
        });
      } else {
        renderMermaid(markup);
      }
    }

    function renderMermaid(markup) {
      document.getElementById('mermaidHolder').innerHTML = markup;
      window.mermaid.mermaidAPI.render('mermaidHolder', markup, () => {
        // Callback function after rendering
      });
    }

    document.addEventListener('DOMContentLoaded', () => {
      const mermaidMarkup =` sequenceDiagram
    participant CI as Client (Initiator)
    participant BOP as Bank's Online Banking Portal or Mobile App
    participant BTMS as Bank's Transaction Monitoring System
    participant TR as Transaction Record
    participant BNS as Bank's Notification System
    participant BSP as Bank's Support Portal
    participant BSS as Bank's Support System
    participant CW as Case Worker
    participant AIE as AI Engine
    participant AD as AI-generated Draft Response

    CI->>BOP: Initiates
    BTMS->>TR: Flags
    BNS->>CI: Notices
    CI->>BSP: Submits
    BSS->>CW: Generates
    AIE->>AD: Drafts
    CW->>AD: Reviews
    CW->>CI: Sends
`

      initializeMermaid(mermaidMarkup);
    });
  </script>
  <style>
    body {
      font-family: Arial, sans-serif;
    }
  
    table {
      width: 100%;
      border-collapse: collapse;
      margin: 25px 0;
      font-size: 0.9em;
    }
  
    table th,
    table td {
      padding: 12px 15px;
      border: 1px solid #ddd;
    }
  
    table th {
      background-color: #f4f4f4;
      text-align: left;
    }
  
    table tr:nth-child(even) {
      background-color: #f9f9f9;
    }
  </style>
  
</body>
</html>
